# Cerply — Launch Status (as of 2025-09-14)

Project board: https://github.com/users/robnreb1/projects/2

## Epics snapshot

### #47 Conversational Orchestrator & Loop-Guard
- [x] `/api/chat` orchestrator with `x-api: chat-orchestrate` and `x-planner` headers
- [x] Loop-guard (duplicate intent coalesced) ✅
- [x] Ingest thin wrappers (`/api/ingest/{clarify,preview,followup,generate}`) with `x-api` headers
- [ ] Chat acceptance script committed and referenced in PR template
- [ ] Confirm legacy alias deprecation:
  - `/ingest/preview` → **307** with `Link: </api/ingest/preview>; rel="successor-version"`

### #50 Auth & Session
- [x] `/api/auth/login`, `/api/auth/callback`, `/api/auth/me`
- [x] `/api/auth/logout` clears `cerply_session` (HttpOnly; SameSite=Lax; Max-Age=30d; **Secure in prod only**)
- [x] Gate `/api/ingest/generate` when `REQUIRE_AUTH_FOR_GENERATE=1` → **401** + `WWW-Authenticate: Session`
- [x] `scripts/acceptance-auth.sh` added and wired into prod acceptance
- [ ] Staging/Prod env: set `REQUIRE_AUTH_FOR_GENERATE=1` in Render

### #48 Learner Engine (MVP)
- [x] Schema: `attempts`, `review_schedule` (SQL migration) + Drizzle models
- [x] `/api/learn/next` & `/api/learn/submit` with minimal spaced scheduler
- [x] `scripts/acceptance-learn.sh` (strength increases on correct)
- [ ] Canonicalize endpoints + alias:
  - `/api/learn/*` canonical; `/learn/*` → **307** with `Link: </api/learn/...>`

## Next up (suggested)
- **#49 Persistence Uplift:** move seeded items → DB, idempotent seeds, fresh-DB acceptance.
- **#52 Observability + Cost Ledger:** `__routes.json`, event sink, `GenLedger`, pilot metrics endpoint.
- **#47 follow-ups:** commit chat acceptance script; finalize legacy alias deprecations.

## Notes
- All new routes must remain behavior-only per UI freeze in FSD.
- Use `REQUIRE_AUTH_FOR_GENERATE=1` in stg/prod before acceptance runs.
